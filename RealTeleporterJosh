-- BIG Copy-Loadstring GUI (dragable + close button)
local LOADSTRING = 'loadstring(game:HttpGet("https://raw.githubusercontent.com/JoshHubTP/TeleporterJosh1/refs/heads/main/Real"))()'

-- Services
local CoreGui = game:GetService("CoreGui")
local StarterGui = game:GetService("StarterGui")

-- Remove existing GUI kung meron
local existing = CoreGui:FindFirstChild("JoshHubBigCopyGui")
if existing then existing:Destroy() end

-- ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "JoshHubBigCopyGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = CoreGui

-- Main frame
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 420, 0, 140)
Frame.Position = UDim2.new(0.5, -210, 0, 36)
Frame.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 12)

-- Drag support
local UIS = game:GetService("UserInputService")
local dragging, dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    Frame.Position = UDim2.new(
        startPos.X.Scale, startPos.X.Offset + delta.X,
        startPos.Y.Scale, startPos.Y.Offset + delta.Y
    )
end

Frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = Frame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

Frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UIS.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Banner (top bar)
local Banner = Instance.new("Frame", Frame)
Banner.Size = UDim2.new(1, 0, 0, 44)
Banner.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Banner.BorderSizePixel = 0
Instance.new("UICorner", Banner).CornerRadius = UDim.new(0, 12)

-- Title
local Title = Instance.new("TextLabel", Banner)
Title.Size = UDim2.new(1, -40, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "NEW SCRIPT"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 26
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Close button (X)
local CloseBtn = Instance.new("TextButton", Banner)
CloseBtn.Size = UDim2.new(0, 28, 0, 28)
CloseBtn.Position = UDim2.new(1, -34, 0, 8)
CloseBtn.Text = "✕"
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 18
CloseBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
CloseBtn.BackgroundTransparency = 1
CloseBtn.AutoButtonColor = true
CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Subtitle
local Sub = Instance.new("TextLabel", Frame)
Sub.Size = UDim2.new(1, -20, 0, 18)
Sub.Position = UDim2.new(0, 10, 0, 50)
Sub.BackgroundTransparency = 1
Sub.Text = "Tap the button to copy the loadstring."
Sub.TextColor3 = Color3.fromRGB(200, 200, 200)
Sub.Font = Enum.Font.SourceSans
Sub.TextSize = 14
Sub.TextXAlignment = Enum.TextXAlignment.Left

-- Copy button
local CopyBtn = Instance.new("TextButton", Frame)
CopyBtn.Size = UDim2.new(0.66, 0, 0, 56)
CopyBtn.Position = UDim2.new(0.5, -((0.66*420)/2), 0, 74)
CopyBtn.Text = "TAP TO COPY"
CopyBtn.Font = Enum.Font.GothamSemibold
CopyBtn.TextSize = 22
CopyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CopyBtn.BackgroundColor3 = Color3.fromRGB(20, 120, 220)
CopyBtn.BorderSizePixel = 0
Instance.new("UICorner", CopyBtn).CornerRadius = UDim.new(0, 10)

-- Status label
local StatusLabel = Instance.new("TextLabel", Frame)
StatusLabel.Size = UDim2.new(1, -20, 0, 18)
StatusLabel.Position = UDim2.new(0, 10, 0, 126)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = ""
StatusLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
StatusLabel.Font = Enum.Font.SourceSansItalic
StatusLabel.TextSize = 12
StatusLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Clipboard attempt
local function try_set_clipboard(text)
    local ok
    ok = pcall(function() setclipboard(text) end)
    if ok then return true end

    ok = pcall(function() if syn and syn.set_clipboard then syn.set_clipboard(text) end end)
    if ok and syn and syn.set_clipboard then return true end

    ok = pcall(function() if set_clipboard then set_clipboard(text) end end)
    if ok then return true end

    ok = pcall(function() if KRNL and KRNL.SetClipboard then KRNL.SetClipboard(text) end end)
    if ok then return true end

    return false
end

-- Copy action
local function performCopy()
    local ok = try_set_clipboard(LOADSTRING)
    if ok then
        StatusLabel.Text = "Copied to clipboard ✅"
    else
        StatusLabel.Text = "Clipboard not available. Copy manually."
        warn("Clipboard not supported in this executor.")
    end
end

CopyBtn.MouseButton1Click:Connect(function()
    CopyBtn.Text = "COPYING..."
    local ok = performCopy()
    task.delay(0.4, function()
        if StatusLabel.Text:find("Copied") then
            CopyBtn.Text = "COPIED!"
            CopyBtn.BackgroundColor3 = Color3.fromRGB(30, 200, 120)
        else
            CopyBtn.Text = "FAILED"
            CopyBtn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
        end
        task.delay(1.5, function()
            CopyBtn.Text = "TAP TO COPY"
            CopyBtn.BackgroundColor3 = Color3.fromRGB(20, 120, 220)
        end)
    end)
end)
